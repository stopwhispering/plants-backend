services:
    plants-backend:
      container_name: plants-backend-container
      restart: unless-stopped
      labels:
        - traefik.http.routers.plants-backend.entrypoints=https-ep
        - traefik.http.routers.plants-backend.rule=Host(`plants.astroloba.net`) && PathPrefix(`/api`)
        - traefik.http.routers.plants-backend.tls=true
        - traefik.http.routers.plants-backend.tls.certresolver=le

        # enable basic auth as defined in traefik's docker compose file
#        - traefik.http.routers.plants-backend.middlewares=my-basic-auth

      environment:
  #        set LOG_LEVEL for Gunicorn, default is "info"
          - LOG_LEVEL=info
          - ENVIRONMENT=prod
          - MAX_WORKERS=5

      volumes:
        - type: bind
          source: /common/plants
          target: /common/plants
